(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49d92b9c"],{"0fd7":function(t,s,e){},"3bf2":function(t,s,e){},"416c":function(t,s,e){"use strict";e("0fd7")},"4cec":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return s("div",[t.isMobile?t._e():s("div",[s("el-button",{staticClass:"back",attrs:{type:"default",icon:"el-icon-arrow-left"},on:{click:t.back}},[t._v(" "+t._s(t.$t("makeplan.back"))+" ")])],1),s("div",{class:""+(t.isMobile?" big big_mobile":"big")},[s("div",{staticClass:"content_area"},[s("div",{class:"stepOne "+(t.step>=1?"hidden":"")},[s("div",{staticClass:"top"},[s("div",{staticClass:"text"},[t._v(" "+t._s(t.$t("makeplan.stepOneText"))+" ")]),s("el-progress",{attrs:{percentage:25,color:"#F66442","is-hide-percent":"","stroke-width":8}})],1),s("div",{staticClass:"choose"},t._l(t.planTest,(function(e,a){return s("div",{key:a,class:"type "+(Number(t.postData[0])===Number(e.code)?"active":""),on:{click:function(s){return t.setPostData(e.code,0)}}},[s("div",{staticClass:"area"},[s("img",{attrs:{src:t.staticUrlGet(e.image),alt:"item.name"}}),s("span",{staticClass:"fontType"},[t._v(t._s(e.name))])])])})),0),s("div",{staticClass:"btn",on:{click:t.nextStep}},[t._v(" "+t._s(t.$t("makeplan.nextStepButton"))+" ")])]),"5"===t.postData[0]?s("div",{class:""+(1===t.step?"stepTwo":"hidden")},[s("div",{staticClass:"top"},[s("div",{staticClass:"text"},[t._v(" "+t._s(t.$t("makeplan.stepTwoText"))+" ")]),s("el-progress",{attrs:{percentage:35,color:"#F66442","is-hide-percent":"","stroke-width":8}})],1),t.daNiuMoKaoExam.id?s("div",[t.daNiuMoKaoExamLoading?t._e():s("div",{staticClass:"chooseTwo daniu"},t._l(t.options,(function(e,a){return s("div",{key:a,class:{"score type active":Number(t.postData[1])===a,"score type":Number(t.postData[1])!==a},on:{click:function(s){return t.setPostData(a,1)}}},[t._v(" "+t._s(e)+" ")])})),0),s("div",{staticClass:"btn",on:{click:t.nextStep}},[t._v(" "+t._s(t.$t("makeplan.nextStepButton"))+" ")]),s("div",{staticClass:"whiteSpace"})]):s("div",[t.daNiuMoKaoExamLoading?t._e():s("div",[s("div",{staticClass:"no_mokao_div"},[s("div",{staticClass:"img_out"},[s("img",{staticClass:"img_self",attrs:{src:t.emptyimg,alt:"no_mokao_img"}})]),s("div",{staticClass:"no_mokao_font"},[t._v(" "+t._s(t.$t("makeplan.noExamScoreMsg"))+" ")])]),s("div",{staticClass:"btn",on:{click:t.gomokao}},[t._v(" "+t._s(t.$t("makeplan.goExamButton"))+" ")]),s("div",{staticClass:"whiteSpace"})])])]):s("div",[s("div",{class:""+(1===t.step?"stepTwo":"hidden")},[s("div",{staticClass:"top"},[s("div",{staticClass:"text"},[t._v(" "+t._s(t.$t("makeplan.chooseExamScoreText"))+" ")]),s("el-progress",{attrs:{percentage:55,color:"#F66442","is-hide-percent":"","stroke-width":8}})],1),s("div",{staticClass:"chooseTwo"},t._l(t.options,(function(e,a){return s("div",{key:a,class:{"score type active":Number(t.postData[1])===a,"score type":Number(t.postData[1])!==a},on:{click:function(s){return t.setPostData(a,1)}}},[t._v(" "+t._s(e)+" ")])})),0),s("div",{staticClass:"btn",on:{click:t.nextStep}},[t._v(" "+t._s(t.$t("makeplan.nextStepButton"))+" ")]),s("div",{staticClass:"whiteSpace"})])]),2===t.step?s("div",{staticClass:"stepThird"},[s("div",{staticClass:"top"},[s("div",{staticClass:"text"},[t._v(" "+t._s(t.$t("makeplan.chooseTargetScoreText"))+" ")]),s("el-progress",{attrs:{percentage:65,color:"#F66442","is-hide-percent":"","stroke-width":8}})],1),s("div",{staticClass:"container"},[s("div",{staticClass:"page-section"},[s("div",{staticClass:"select_out"},[s("div",{staticClass:"target_font"},[t._v(" "+t._s(t.$t("makeplan.selectTargetScorePlaceholder"))+" ")]),s("div",{staticClass:"selece_content_out"},[s("el-select",{staticClass:"makePlanSelect",attrs:{placeholder:""+t.$t("makeplan.xzfs")},on:{change:function(s){return t.setPostData(t.postData[2],2)}},model:{value:t.postData[2],callback:function(s){t.$set(t.postData,2,s)},expression:"postData[2]"}},t._l(t.selector,(function(t){return s("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)])])]),s("div",{staticClass:"btn",on:{click:t.nextStep}},[t._v(" "+t._s(t.$t("makeplan.nextStepButton"))+" ")]),s("div",{staticClass:"whiteSpace"})]):t._e(),3!==t.step||t.hid?t._e():s("div",{staticClass:"stepFour"},[s("div",{staticClass:"top"},[s("div",{staticClass:"text"},[t._v(" "+t._s(t.$t("makeplan.chooseTestDateText"))+" ")]),s("el-progress",{attrs:{percentage:75,color:"#F66442","is-hide-percent":"","stroke-width":8}})],1),s("div",{staticClass:"testDate"},[s("span",{staticClass:"testDate_font"},[t._v(" "+t._s(t.$t("makeplan.presetTestDateText"))+" ")]),s("div",{staticClass:"timeArea",on:{click:t.open}},[t._v(" "+t._s(t.postData[3]||` ${t.$t("makeplan.chooseDateButtonText")} `)),t._m(0),s("el-date-picker",{staticClass:"time-date-picker",staticStyle:{height:"0px",overflow:"hidden",width:"0px"},attrs:{type:"date",placeholder:""+t.$t("makeplan.chooseDateButtonText"),"picker-options":t.pickerOptions,clearable:!1,align:"right"},on:{change:t.calendarOK},model:{value:t.calendarvalue,callback:function(s){t.calendarvalue=s},expression:"calendarvalue"}})],1)]),s("div",{staticClass:"whiteSpace"}),s("div",{staticClass:"btn",on:{click:t.nextStep}},[t._v(" "+t._s(t.$t("makeplan.nextStepButton"))+" ")])]),4===t.step?s("div",{staticClass:"stepFour"},[s("div",{staticClass:"top"},[s("div",{staticClass:"text"},[t._v(t._s(t.$t("makeplan.xedqst")))]),s("el-progress",{attrs:{percentage:85,color:"#F66442","is-hide-percent":"","stroke-width":8}})],1),s("div",{staticClass:"test_type_out"},t._l(t.testTypeList,(function(e){return s("div",{key:e.key,class:t.selectTypeUiIsShow(e)?" one_test_type one_test_type_selected":"one_test_type",on:{click:function(s){return t.clicktestType(e)}}},[t._v(" "+t._s(e.name)+" "),t.selectTypeUiIsShow(e)?s("div",{staticClass:"check_icon"},[s("img",{staticClass:"img_self",attrs:{src:t.test_type_check_icon}})]):t._e()])})),0),s("div",{staticClass:"whiteSpace"}),s("div",{staticClass:"btn",on:{click:t.nextStep}},[t._v(" "+t._s(t.$t("makeplan.nextStepButton"))+" ")])]):t._e(),5!==t.step||t.hid?t._e():s("div",{staticClass:"stepFour"},[s("div",{staticClass:"top"},[s("div",{staticClass:"text"},[t._v(t._s(t.$t("makeplan.zcsc")))]),s("el-progress",{attrs:{percentage:100,color:"#F66442","is-hide-percent":"","stroke-width":8}})],1),s("div",{staticClass:"testDate test__day_time"},[s("span",{staticClass:"testDate_font"},[t._v(t._s(t.$t("makeplan.mrlxsc")))]),s("div",{staticClass:"test_day_time_select"},[s("el-select",{staticClass:"day_hoursSelect",attrs:{placeholder:"请选择"},model:{value:t.dayHours,callback:function(s){t.dayHours=s},expression:"dayHours"}},t._l(t.hoursoptions,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),s("div",{staticClass:"plantest_wrapper"},[s("div",{staticClass:"yugutips"},[t._v(t._s(t.$t("makeplan.yuycan")))]),s("div",{staticClass:"plantest_out"},t._l(t.plantestData,(function(e){return s("div",{key:e.key,staticClass:"one_plan_test"},[s("div",{staticClass:"left_name"},[t._v(t._s(e.name))]),s("div",{staticClass:"add_del_out"},[s("div",{staticClass:"del_btn",on:{click:()=>{1!==e.plantestnum&&e.plantestnum--}}},[t._v(" - ")]),s("div",{staticClass:"num_btn"},[t._v(t._s(e.plantestnum))]),s("div",{staticClass:"add_btn",on:{click:()=>{e.plantestnum>=e.total||e.plantestnum++}}},[t._v(" + ")])])])})),0)]),s("div",{staticClass:"whiteSpace"}),s("div",{staticClass:"btn",on:{click:t.submitPlan}},[t._v(" "+t._s(t.$t("makeplan.customPlanButtonText"))+" ")])]),t.hid?s("div",{staticClass:"end_new",style:{"background-image":`url(${t.bgimg})`,"background-size":"contain","background-repeat":"no-repeat"}},[s("div",{staticClass:"title"},[t._v(" "+t._s(t.$t("makeplan.studyPlanTitle"))+" ")]),s("div",{staticClass:"morefont"},[t._v(" "+t._s(t.$t("makeplan.studyPlanText"))+" ")]),s("div",{staticClass:"progress"},[s("el-progress",{attrs:{percentage:t.initNum,color:"#F66442","is-hide-percent":"","stroke-width":20}}),s("div",{staticClass:"num"},[t._v(t._s(t.initNum)+"%")])],1)]):t._e()])])])},i=[function(){var t=this,s=t._self._c;return s("span",[t._v("  "),s("i",{staticClass:"el-icon-arrow-down"})])}],o=(e("cfff"),e("b41b"),e("0c65"),e("2f20"),e("6058"),e("080f"),e("60bb")),n=e.n(o),c=e("f7f9"),l=e.n(c),r=e("5880"),p=e("d722");const d=Object(p["Bb"])("image/plan_bg.png"),h=(Object(p["Cb"])("mokao/no_mokao_img.png"),Object(p["Bb"])("image/emptyi18n.svg")),u=Object(p["Bb"])("image/makeplan/test_type_check_icon.svg");var v={data(){return{staticUrlGet:p["Cb"],bgimg:d,step:0,selector:[],isOpened:!1,postData:["5"],initNum:50,hid:!1,daNiuMoKaoExam:{},daNiuMoKaoExamLoading:!0,emptyimg:h,test_type_check_icon:u,currentDate:"",calendarvalue:"",pickerOptions:{disabledDate(t){return t.getTime()<Date.now()}},selectTypeList:[],dayHours:4,hoursoptions:[{value:1,label:"1h"},{value:2,label:"2h"},{value:3,label:"3h"},{value:4,label:"4h"},{value:5,label:"5h"},{value:6,label:"6h"},{value:7,label:"7h"},{value:8,label:"8h"},{value:9,label:"9h"},{value:10,label:"10h"}],plantestData:[]}},computed:{...Object(r["mapState"])("app",{planTest(t){return t.planTest},user(t){return t.user},userTarget(t){return t.target},isMobile(t){return t.isMobile},testTypeList(t){const s=[],{groups:e,topics:a}=t;return e.forEach(t=>{const e=a.filter(s=>s.group===t.key).filter(t=>"0"!==t.status);s.push(...e)}),s},zhinengPlanData(t){return t.zhinengPlanData},topics(t){const{topics:s}=t;return s.filter(t=>"0"!==t.status)}}),options(){const{s:t}=this.daNiuMoKaoExam;let s="";"5"===this.postData[0]&&(s=[t]);try{if(void 0!==this.postData[0]){const t=this.planTest.find(t=>t.code===this.postData[0]).options.split(","),e=void 0!==this.postData[0]?t:[];s=e}}catch(e){}return s}},watch:{dayHours(){5===this.step&&this.getTestDetail()}},mounted(){this.examGetMethod();const{keys:t,hour:s,score:e,planTime:a,planAnswer:i}=this.userTarget;if(t){const[o,n]=i.split("-");"5"===o?(this.postData[0]="5",this.postData[1]=0):(this.postData[0]=o,this.postData[1]=n||0),this.selectTypeList=t.split(","),this.dayHours=Number(s),this.postData[2]=Number(e),this.postData[3]=l()(a).format("YYYY-MM-DD"),this.calendarvalue=a}else{this.postData[1]=0;const t=[];this.testTypeList.forEach(s=>{t.push(s.key)}),this.selectTypeList=t}const o=[];for(let n=60;n<=160;n+=5)o.push(n);this.selector=o,this.currentDate=l()(this.postData[3]).isBefore(l()().add(1,"d"))?l()().add(1,"d"):this.postData[3]},beforeDestroy(){},methods:{async getTestDetail(){const{data:t,err:s}=await Object(p["L"])({hour:this.dayHours,keys:this.selectTypeList.join(",")});if(s)this.$message.error(s);else{this.plantestData=this.objtoarr(t);const s=this.testTypeList.map(({key:t})=>t);this.plantestData=n.a.sortBy(this.plantestData,t=>s.indexOf(t.key))}},objtoarr(t){const s=[];return n.a.each(t,(t,e)=>{const a=this.topics.find(t=>t.key===e);a&&s.push({...a,plantestnum:t})}),s},clicktestType(t){const{key:s}=t;this.selectTypeList.includes(s)?this.selectTypeList=this.selectTypeList.filter(t=>t!==s):this.selectTypeList.push(s)},selectTypeUiIsShow(t){const{key:s}=t;return this.selectTypeList.includes(s)},back(){this.$router.go(-1)},gomokao(){if(!this.user.examNum||this.user.examNum<=0)return this.$message({message:""+this.$t("makeplan.pleaseBuy"),type:"warning"}),void this.$router.push("/vip");this.$router.push("/exam")},calendarOK(){const t=l()(this.calendarvalue).format("YYYY-MM-DD");this.setPostData(t,3),this.isOpened=!1},async examGetMethod(){const{data:{exams:t}}=await Object(p["o"])(),s=t.find(t=>"0"!==t.status&&"1"!==t.status)||{};this.daNiuMoKaoExam=s,this.daNiuMoKaoExamLoading=!1},findDaNiuMoKaoExam(){},arrtoobj(t){const s={};return t.forEach(t=>{s[t.key]=t.plantestnum}),s},async submitPlan(){const[t,s,e,a]=this.postData;a?(this.hid=!0,"5"===t?await Object(p["Hb"])({planAnswer:`${t}-${this.daNiuMoKaoExam.id}`,score:e,planTime:a,hour:this.dayHours,keys:this.selectTypeList.join(","),nums:JSON.stringify(this.arrtoobj(this.plantestData))}):await Object(p["Hb"])({planAnswer:`${t}-${s}`,score:e,planTime:a,hour:this.dayHours,keys:this.selectTypeList.join(","),nums:JSON.stringify(this.arrtoobj(this.plantestData))}),this.timeNum=setInterval(async()=>{100===this.initNum?(clearInterval(this.timeNum),this.$route.query.edit,await this.updatePlan(),this.$router.go(-1)):this.initNum++},30)):this.$message({message:""+this.$t("makeplan.chooseday"),type:"warning"})},async updatePlan(){await this.$store.dispatch("app/getUserInfo")},setPostData(t,s){this.postData[s]=t,this.isOpened=!1,this.postData=[...this.postData]},nextStep(){if(0===this.step&&"5"===this.postData[0]&&(this.postData[1]=0),0===this.step&&void 0===this.postData[0]||1===this.step&&void 0===this.postData[1]||2===this.step&&void 0===this.postData[2]||3===this.step&&void 0===this.postData[3]||4===this.step&&0===this.selectTypeList.length)return 2===this.step?void this.$message({message:""+this.$t("makeplan.chooseTargetScore"),type:"warning"}):3===this.step?void this.$message({message:""+this.$t("makeplan.chooseTestDate"),type:"warning"}):4===this.step?void this.$message({message:""+this.$t("makeplan.chooseTestType"),type:"warning"}):void this.$message({message:""+this.$t("makeplan.choose"),type:"warning"});3===this.step&&l()(this.postData[3]).isBefore(l()())?this.$message({message:""+this.$t("makeplan.datbefore"),type:"warning"}):(4===this.step&&this.getTestDetail(),this.step++)},handleClose(){this.isOpened=!1},open(){document.querySelector(".time-date-picker").querySelector("input").focus()}}},m=v,_=(e("5e81"),e("416c"),e("643b")),k=Object(_["a"])(m,a,i,!1,null,"65fc3899",null);s["default"]=k.exports},"5e81":function(t,s,e){"use strict";e("3bf2")}}]);